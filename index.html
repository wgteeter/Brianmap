<!DOCTYPE html>
<html>
  <head>
  <link rel="stylesheet" href='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.css' />
  <script src='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.js'></script>
    <script src='http://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.0.1/leaflet-omnivore.min.js'></script>
 <title>Amazing Map</title>
    <style>
      body { margin:0; padding:0; }
      #map { position: absolute; top: 60px; bottom: 0; width:700px; }
    </style>
  </head>
  <body>
   <h2>My Map</h2>
  <div id='map'></div>
      <script type="text/javascript">
             L.mapbox.accessToken = 'pk.eyJ1IjoibWF0cml4LW1zdSIsImEiOiJmU1NPbUFjIn0.MWCWCMSJ8Ar-6KZtNPzy4w';
        var map = L.mapbox.map('map', 'matrix-msu.n77if505', {minZoom: 3});
   var points = omnivore.csv(
          'data.csv')
		         .on('ready', function(layer){
          this.eachLayer(function(marker) {
            marker.bindPopup(
			           '<h3>' + marker.toGeoJSON().properties.from_user + '</h3>' +
              '<img style="float: left; width: 100px; padding: 5px; margin-right: 5px" src=' + marker.toGeoJSON().properties.profile_image_url + ' />' +
              '<p>' + marker.toGeoJSON().properties.text + '</p><div style="clear: both"></div>'
     , {autoPanPadding: [5,55]}
            );
          });
         })
		         .addTo(map);
      </script>
    </body>
  </html>
